{"version":3,"sources":["../src/register.js"],"names":[],"mappings":"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","file":"register.js","sourcesContent":["'use strict';\r\n\r\nclass Registration {\r\n    constructor() {\r\n        let that = this;\r\n        $('#btnSubmit').on('click', (event) => { that.clickSubmit(event); });\r\n        $('#username').on('blur', that.checkUsername);\r\n    }\r\n\r\n    clickSubmit(e) {\r\n        e.preventDefault();\r\n        this._removeError();\r\n        this.checkUsername();\r\n        $('#registerAlertError').hide();\r\n        let tabErr = this._validForm();\r\n        if (tabErr.length === 0) {\r\n            this._sendRequest();\r\n        }\r\n        else {\r\n            this._addError(tabErr);\r\n        }\r\n    }\r\n\r\n    checkUsername() {\r\n        let userName = $('#username').val();\r\n        if (userName.length === 0) {\r\n            return;\r\n        }\r\n\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: $('#registrationForm').attr('action'),\r\n            data: {\r\n                type: 'checkUsername',\r\n                username: userName\r\n            },\r\n            success: (response) => {\r\n                if (!response.isExist) {\r\n                    $('#username').addClass('form-control-success')\r\n                                  .removeClass('form-control-danger');\r\n                    $('#formGpUsername').addClass('has-success')\r\n                                        .removeClass('has-danger');\r\n                }\r\n                else {\r\n                    $('#username').addClass('form-control-danger')\r\n                                  .removeClass('form-control-success');\r\n                    $('#formGpUsername').addClass('has-danger')\r\n                                        .removeClass('has-success');\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // Private\r\n    _validForm() {\r\n        let username = $('#username').val();\r\n        let email = $('#email').val();\r\n        let password = $('#password').val();\r\n        let password2 = $('#password2').val();\r\n        let tabErr = [];\r\n        if (username.length === 0) {\r\n            tabErr.push('#formGpUsername');\r\n        }\r\n\r\n        // TODO: force length of password and add indication about the strengh\r\n        if (password.length === 0 || password !== password2) {\r\n            tabErr.push('#formGpPassword');\r\n        }\r\n\r\n        let regexMail = /^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$/i;\r\n        if (email.length === 0 || !regexMail.test(email)) {\r\n            tabErr.push('#formGpEmail');\r\n        }\r\n        return tabErr;\r\n    }\r\n\r\n    _sendRequest() {\r\n        let formData = this._getFormData();\r\n        let that = this;\r\n        $('#btnSubmit').addClass('disabled');\r\n        $('.own-loader').show();\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: $('#registrationForm').attr('action'),\r\n            data: formData,\r\n            success: that._registerSuccess,\r\n            error: that._registerError\r\n        });\r\n    }\r\n\r\n    _registerSuccess(response) {\r\n        $('.own-loader').hide();\r\n        if (response.result) {\r\n            $('#cardForm').remove();\r\n            $('#registerAlertSuccess').show();\r\n        }\r\n        else {\r\n            $('#btnSubmit').removeClass('disabled');\r\n            $('#registerAlertError').show();\r\n        }\r\n    }\r\n\r\n    _registerError() {\r\n        $('.own-loader').hide();\r\n        $('#btnSubmit').removeClass('disabled');\r\n        $('#registerAlertError').show();\r\n    }\r\n\r\n    _getFormData() {\r\n        return {\r\n            type: 'registration',\r\n            login: $('#username').val(),\r\n            email: $('#email').val(),\r\n            password: $('#password').val()\r\n        };\r\n    }\r\n\r\n    _addError(tabError) {\r\n        $(tabError).each((i) => {\r\n            $(tabError[i]).addClass('has-danger');\r\n        });\r\n    }\r\n\r\n    _removeError() {\r\n        $('.form-group.has-danger').removeClass('has-danger');\r\n        $('.form-group.has-success').removeClass('has-success');\r\n        $('input .form-control-danger').removeClass('form-control-danger');\r\n        $('input .form-control-success').removeClass('form-control-success');\r\n    }\r\n}\r\n\r\n$(document).ready(() => {\r\n    new Registration();\r\n});\r\n"]}